(this["webpackJsonpevent-app"]=this["webpackJsonpevent-app"]||[]).push([[0],{21:function(e,t,a){},38:function(e,t,a){e.exports=a(65)},43:function(e,t,a){},65:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(14),o=a.n(l),c=(a(43),a(6)),s=a(7),i=a(10),u=a(9),d=(a(20),a(18)),m=a(8),h=a(15),p=a(12),v=a(13),E=(a(21),a(17)),b=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={disabled:!1},n}return Object(s.a)(a,[{key:"submitHandler",value:function(e){var t=this;e.preventDefault(),this.setState({disabled:!0}),this.props.client.login(e.target.username.value,e.target.password.value).then((function(e){t.setState({disabled:!1}),t.props.loggedIn(e.data.token)})).catch((function(){alert("an error occured, please try again"),t.setState({disabled:!1})}))}},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement(h.a,{bg:"primary",variant:"dark",expand:"md"},r.a.createElement(h.a.Brand,null,"Event App ")),r.a.createElement(E.a,null,r.a.createElement(d.a,{className:"home"},r.a.createElement(m.a,null,r.a.createElement("h2",{className:"Color"},"Event App "),r.a.createElement("br",null),r.a.createElement("h4",{className:"Color"},"What?"),r.a.createElement("p",null," Event App is the world\u2019s leading event technology platform trusted by over 50,000 event professionals in more than 50 countries."),r.a.createElement("p",null,"Our community of customers includes top shows from across the world; amazing performing arts venues; global convention centers; some of the world\u2019s most visited museums, professional sports arenas, and stadia; plus, other unique events and venues of all shapes and sizes."),r.a.createElement("p",null,"Together, we can create extraordinary events.")),r.a.createElement(m.a,null,r.a.createElement("h3",{className:"Color"},"Login")," ",r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("form",{onSubmit:function(t){return e.submitHandler(t)}},r.a.createElement("p",null,"Username"),r.a.createElement(p.a.Control,{type:"text",name:"username",placeholder:"Enter you name",disabled:this.state.disabled}),r.a.createElement("br",null),r.a.createElement("p",null,"Password"),r.a.createElement(p.a.Control,{type:"password",name:"password",placeholder:"Password",disabled:this.state.disabled}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(v.a,{variant:"primary",type:"submit",disabled:this.state.disabled}," Submit "))))))}}]),a}(r.a.Component),f=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={disabled:!1},n}return Object(s.a)(a,[{key:"submitHandler",value:function(e){var t,a=this;e.preventDefault(),this.setState({disabled:!0}),t=this.props.currentAd?this.props.client.updateAd(this.props.currentAd._id,e.target.adName.value,e.target.location.value,e.target.date.value,e.target.price.value):this.props.client.addAd(e.target.adName.value,e.target.location.value,e.target.price.value,e.target.date.value),console.log(this.props.client.addAd),t.then((function(){a.setState({disabled:!1}),document.getElementById("addForm").reset(),a.props.refreshList()})).catch((function(){console.log("catch"),alert("an error occured, please try again"),a.setState({disabled:!1})}))}},{key:"render",value:function(){var e,t,a,n,l=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement(E.a,null,r.a.createElement("h2",{className:"add"},"  ",this.props.currentAd?"Update":"Add Event ")," ",r.a.createElement("br",null),r.a.createElement("form",{onSubmit:function(e){return l.submitHandler(e)},id:"addForm"},"Name: ",r.a.createElement("br",null),r.a.createElement(p.a.Control,{type:"text",defaultValue:null===(e=this.props.currentAd)||void 0===e?void 0:e.name,name:"adName",disabled:this.state.disabled}),r.a.createElement("br",null),"Location: ",r.a.createElement("br",null),r.a.createElement(p.a.Control,{type:"text",defaultValue:null===(t=this.props.currentAd)||void 0===t?void 0:t.location,name:"location",disabled:this.state.disabled}),r.a.createElement("br",null),"Price:",r.a.createElement("br",null),r.a.createElement(p.a.Control,{type:"text",defaultValue:null===(a=this.props.currentAd)||void 0===a?void 0:a.price,name:"price",disabled:this.state.disabled}),r.a.createElement("br",null),"Date: ",r.a.createElement("br",null),r.a.createElement(p.a.Control,{type:"text",defaultValue:null===(n=this.props.currentAd)||void 0===n?void 0:n.date,name:"date",disabled:this.state.disabled}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(v.a,{type:"submit",disabled:this.state.disabled}," Submit "))))}}]),a}(r.a.Component),g=a(36),y=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={ads:[],currentAd:void 0},n}return Object(s.a)(a,[{key:"refreshList",value:function(){var e=this;this.props.client.getAds().then((function(t){return e.setState({ads:t.data})}))}},{key:"removeAdvert",value:function(e){this.props.client.removeAd(e).then(this.refreshList())}},{key:"updateAdvert",value:function(e){this.setState({currentAd:e})}},{key:"componentDidMount",value:function(){this.refreshList()}},{key:"buildrows",value:function(){var e=this;return this.state.ads.map((function(t){return r.a.createElement("tr",{key:t._id},r.a.createElement("td",null,t.name),r.a.createElement("td",null,t.location),r.a.createElement("td",null,"\xa3",t.price),r.a.createElement("td",null,t.date),r.a.createElement("td",null,r.a.createElement(v.a,{onClick:function(){return e.removeAdvert(t._id)}}," remove")," ",r.a.createElement(v.a,{onClick:function(){return e.updateAdvert(t)}}," update")))}))}},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement(h.a,{bg:"primary",variant:"dark",expand:"md"},r.a.createElement(h.a.Brand,null,"Event App ")),r.a.createElement(d.a,{className:"home"},r.a.createElement(m.a,{sm:1}),r.a.createElement(m.a,{sm:3},r.a.createElement(f,{client:this.props.client,refreshList:function(){e.refreshList(),e.setState({currentAd:void 0})},currentAd:this.state.currentAd})),r.a.createElement(m.a,{sm:7},r.a.createElement(g.a,{striped:!0,bordered:!0,hover:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{className:"Color"},"  Name  "),r.a.createElement("th",{className:"Color"}," Location "),r.a.createElement("th",{className:"Color"},"  Price  "),r.a.createElement("th",{className:"Color"},"  Date  "),r.a.createElement("th",{className:"Color"}," Action"))),r.a.createElement("tbody",null,this.buildrows())),r.a.createElement("br",null),r.a.createElement("br",null))))}}]),a}(r.a.Component),k=a(24),w=a.n(k),A=a(37),C=a(25),j=a.n(C),O="https://event-ap.herokuapp.com/",S=function(){function e(t,a){Object(c.a)(this,e),this.tokenProvider=t,this.logoutHandler=a}return Object(s.a)(e,[{key:"login",value:function(){var e=Object(A.a)(w.a.mark((function e(t,a){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j()({method:"post",url:"".concat(O,"auth"),data:{username:t,password:a}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"autheticatedCall",value:function(e,t,a){var n=this;return j()({method:e,url:t,headers:{authorization:this.tokenProvider()},data:a}).catch((function(e){if(403===e.response.status)return n.logoutHandler(),Promise.reject();throw e}))}},{key:"getAds",value:function(){return this.autheticatedCall("get",O)}},{key:"addAd",value:function(e,t,a,n){return this.autheticatedCall("post",O,{name:e,location:t,price:a,date:n})}},{key:"removeAd",value:function(e){return this.autheticatedCall("delete","".concat(O).concat(e))}},{key:"updateAd",value:function(e,t,a,n,r){return this.autheticatedCall("put","".concat(O).concat(e),{name:t,location:a,price:r,date:n})}}]),e}(),N=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={token:window.localStorage.getItem("token")},n.client=new S((function(){return n.state.token}),(function(){return n.logout()})),n}return Object(s.a)(a,[{key:"login",value:function(e){window.localStorage.setItem("token",e),this.setState({token:e})}},{key:"logout",value:function(){window.localStorage.removeItem("token"),this.setState({token:void 0})}},{key:"render",value:function(){var e=this;return this.state.token?r.a.createElement(y,{client:this.client}):r.a.createElement(b,{loggedIn:function(t){return e.login(t)},client:this.client})}}]),a}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(N,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[38,1,2]]]);
//# sourceMappingURL=main.348aeba3.chunk.js.map